<!-- Main content -->
<section class="content">
 <div class="container-fluid">
   <!-- SELECT2 EXAMPLE -->
   <div class="card card-default">
     <div class="card-header">
       <h3 class="card-title">Create Students</h3>
       <div class="card-tools">
         <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
       </div>
     </div>
     <!-- /.card-header -->
     <div class="card-body">  
       <div class="row">
         <div class="col-md-6">
           <div class="form-group">
              <!-- form start -->
              <form action="/admin/saveStudent" id="schoolsave" method="post">
                <div class="card-body">
                  <div class="form-group">
                    <select class="form-control select2" style="width: 100%;" id="sch" name="sch">
                        <option value="" selected="selected">Select School</option>
                        <% if (students.Schools) { %>
                          <% students.Schools.forEach(sl =>{ %>
                            <option value="<%= sl.id %>" ><%= sl.first_name %></option>
                          <% }) %>  
                        <% } %>  
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="fname">First Name</label>
                    <input type="text" class="form-control" id="fname" name="fname" placeholder="First Name">
                  </div>
                  <div class="form-group">
                    <label for="lname">Last Name</label>
                    <input type="text" class="form-control" id="lname" name="lname" placeholder="Last Name">
                  </div>
                  <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" class="form-control" id="email" name="email" placeholder="Enter email">
                  </div>  
                </div>
                <!-- /.card-body -->
                <div class="card-footer">
                  <button type="submit" class="btn btn-primary">Submit</button>
                </div>
              </form>
           </div>
         </div>
       </div>
     </div>
     <!-- /.card-body -->
   </div>
   <!-- /.card -->

   <div class="card">
     <div class="card-header">
       <h3 class="card-title">Students Listing</h3>
     </div>
     <div class="text-center" style="color: green;">
       <strong><%= messages.success %></strong>
     </div>
     <!-- /.card-header -->
     <div class="card-body">
       <table id="example1" class="table table-bordered table-hover">
         <thead>
         <tr>
           <th>First Name</th>
           <th>Last Name</th>
           <th>Email</th>
         </tr>
         </thead>
         <tbody>
          <% if(students.students){ %>
            <% students.students.forEach(el =>{ %>
              <tr>
                <td><%= el.first_name %></td>
                <td><%= el.last_name %></td>
                <td><%= el.email %></td>
              </tr> 
              <% }) %>
           <% } %>
         </tbody>
       </table>
     </div>
     <!-- /.card-body -->
   </div>
 </div><!-- /.container-fluid -->
</section>
<script>
 $( "#upload-file" ).validate({
   // errorPlacement: (error, element)=>{
   //   error.insertAfter($(element).parent('div').parent('div')); 
   // },
   rules: {
     urlfile: {
       required: true,
       extension: "xlsx|csv"
     },
     schoolname:{
       required: true,
     },
   },
   messages : {
     urlfile: {
       extension: "Please enter a value with a valid extension. Valid extension : xlsx, csv"
     },
     schoolname: {
       extension: "Please select School To upload csv"
     }
   }
});

</script>