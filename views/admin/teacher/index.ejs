 <!-- Main content -->
 <section class="content">
  <div class="container-fluid">
    <div class="text-center" style="color: green;">
      <strong><%= messages.success %></strong>
    </div>
    <!-- SELECT2 EXAMPLE -->
    <div class="card card-default">
      <div class="card-header">
        <h3 class="card-title">Create Teachers</h3>
        <div class="card-tools">
          <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
        </div>
      </div>
      <!-- /.card-header -->
      <div class="card-body">
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label>Add Multiple Teachers By Csv</label>
              <form action="/admin/saveCsvData" id="upload-file" enctype="multipart/form-data"  method="post" >
                <div class="form-group">
                  <select class="form-control select2" style="width: 100%;" id="sch" name="sch">
                      <option value="" selected="selected">Select School</option>
                      <% if (obj.Schools) { %>
                        <% obj.Schools.forEach(sl =>{ %>
                          <option value="<%= sl.id %>" ><%= sl.first_name %></option>
                        <% }) %>  
                      <% } %>  
                  </select>
                </div>
                <div class="form-group">
                  <label for="exampleInputFile">File input</label>
                  <div class="input-group">
                    <div class="custom-file">
                      <input type="file" class="custom-file-input" id="exampleInputFile" name="urlfile">
                      <label class="custom-file-label" for="exampleInputFile">Choose file</label>
                    </div>
                  </div>
                </div>
                <% if(obj.Schools){ %>
                  <div>
                    <button class="btn btn-primary" type="submit">SAVE</button>
                  </div>
                <%  }else{ %>
                      <p>Please cretae School First to Upload csv OR use Manually form to create teacher</p>
                <%  } %>
              </form>
            </div>
          </div>
          <!-- /.col -->
          <div class="col-md-6">
            <div class="form-group">
              <label>Manually Add Teacher</label>
                <form action="/admin/addmanuallyTeacher" id="Manually" name ="Manually" method="post" >
                  <div class="form-group">
                    <select class="form-control select2" style="width: 100%;" name ="schoolname2">
                        <option value="" selected="selected">Select School</option>
                        <% obj.Schools.forEach(sl =>{ %>
                          <option value="<%= sl.id %>" ><%= sl.first_name %></option>
                        <% }) %>  
                    </select>
                  </div>
                    <div class="form-group">
                      <label for="fname">First Name</label>
                      <input type="text" class="form-control" id="fname" name="first_name" placeholder="First Name of teacher">
                    </div>
                    <div class="form-group">
                      <label for="lname">Last Name</label>
                      <input type="text" class="form-control" id="lname" name="last_name" placeholder="Last Name of teacher">
                    </div>
                    <div class="form-group">
                      <label for="email">Email</label>
                      <input type="text" class="form-control" id="email" name="email" placeholder="Email">
                    </div>
                      <div>
                        <button class="btn btn-primary" type="submit">SAVE</button>
                      </div>
                </form>
            </div>
          </div>
          <!-- /.col -->
        </div>
      </div>
      <!-- /.card-body -->
    </div>
    <!-- /.card -->

    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Teacher Listing</h3>
      </div>
      <!-- /.card-header -->
      <div class="card-body">
        <table id="example1" class="table table-bordered table-hover">
          <thead>
          <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>School Name</th>
            <th>Title</th>
            <th>Department</th>
            <th>Supervisor</th>
            <th>Hour Rate</th>
            <th>Social ins num</th>
            <th>Credential</th>
            <th>Location</th>
            <th>Address</th>
            <th>Office Address</th>
            <th>Description</th>
            <th>Joining Date</th>
          </tr>
          </thead>
          <tbody>
            <% obj.teachers.forEach(el =>{ %>
              <tr>
                <td><%= el.first_name %></td>
                <td><%= el.last_name %></td>
                <td><%= el.email %></td>
                <% if (el.Teacher) {  %>
                  <% if (el.Teacher.School) {  %>
                  <td><%= el.Teacher.School.school_name %></td>
                  <% }else{  %>
                    <td>Need To Updated</td>
                  <% } %>
                <% }else{ %>
                  <td>Need To Updated</td>
                <% } %>
                <% if (el.Teacher) {  %>
                  <% if (el.Teacher.title) {  %>
                  <td><%= el.Teacher.title %></td>
                  <% }else{  %>
                    <td>Need To Updated</td>
                  <% } %>
                <% }else{ %>
                  <td>Need To Updated</td>
                <% } %>

                <% if (el.Teacher) {  %>
                  <% if (el.Teacher.department) {  %>
                  <td><%= el.Teacher.department %></td>
                  <% }else{  %>
                    <td>Need To Updated</td>
                  <% } %>
                <% }else{ %>
                  <td>Need To Updated</td>
                <% } %>
                
                <% if (el.Teacher) {  %>
                  <% if (el.Teacher.supervisor) {  %>
                  <td><%= el.Teacher.supervisor %></td>
                  <% }else{  %>
                    <td>Need To Updated</td>
                  <% } %>
                <% }else{ %>
                  <td>Need To Updated</td>
                <% } %>

                <% if (el.Teacher) {  %>
                  <% if (el.Teacher.hr_rate) {  %>
                  <td><%= el.Teacher.hr_rate %></td>
                  <% }else{  %>
                    <td>Need To Updated</td>
                  <% } %>
                <% }else{ %>
                  <td>Need To Updated</td>
                <% } %>

                <% if (el.Teacher) {  %>
                  <% if (el.Teacher.social_ins_num) {  %>
                  <td><%= el.Teacher.social_ins_num %></td>
                  <% }else{  %>
                    <td>Need To Updated</td>
                  <% } %>
                <% }else{ %>
                  <td>Need To Updated</td>
                <% } %>

                <% if (el.Teacher) {  %>
                  <% if (el.Teacher.credential) {  %>
                  <td><%= el.Teacher.credential %></td>
                  <% }else{  %>
                    <td>Need To Updated</td>
                  <% } %>
                <% }else{ %>
                  <td>Need To Updated</td>
                <% } %>

                <% if (el.Teacher) {  %>
                  <% if (el.Teacher.location) {  %>
                  <td><%= el.Teacher.location %></td>
                  <% }else{  %>
                    <td>Need To Updated</td>
                  <% } %>
                <% }else{ %>
                  <td>Need To Updated</td>
                <% } %>

                <% if (el.Teacher) {  %>
                  <% if (el.Teacher.address) {  %>
                  <td><%= el.Teacher.address %></td>
                  <% }else{  %>
                    <td>Need To Updated</td>
                  <% } %>
                <% }else{ %>
                  <td>Need To Updated</td>
                <% } %>

                <% if (el.Teacher) {  %>
                  <% if (el.Teacher.office_address) {  %>
                  <td><%= el.Teacher.office_address %></td>
                  <% }else{  %>
                    <td>Need To Updated</td>
                  <% } %>
                <% }else{ %>
                  <td>Need To Updated</td>
                <% } %>

                <% if (el.Teacher) {  %>
                  <% if (el.Teacher.description) {  %>
                  <td><%= el.Teacher.description %></td>
                  <% }else{  %>
                    <td>Need To Updated</td>
                  <% } %>
                <% }else{ %>
                  <td>Need To Updated</td>
                <% } %>

                <% if (el.Teacher) {  %>
                  <% if (el.Teacher.joining_date) {  %>
                  <td><%= el.Teacher.joining_date %></td>
                  <% }else{  %>
                    <td>Need To Updated</td>
                  <% } %>
                <% }else{ %>
                  <td>Need To Updated</td>
                <% } %>
              </tr> 
            <% }) %>        
          </tbody>
        </table>
      </div>
      <!-- /.card-body -->
    </div>
  </div><!-- /.container-fluid -->
</section>
<script>
  $( "#upload-file" ).validate({
    // errorPlacement: (error, element)=>{
    //   error.insertAfter($(element).parent('div').parent('div')); 
    // },
    rules: {
      urlfile: {
        required: true,
        extension: "xlsx|csv"
      },
      schoolname:{
        required: true,
      },
    },
    messages : {
      urlfile: {
        extension: "Please enter a value with a valid extension. Valid extension : xlsx, csv"
      },
      schoolname: {
        extension: "Please select School To upload csv"
      }
    }
});

$( "#Manually" ).validate({
    errorPlacement: (error, element)=>{
      error.insertAfter($(element).parent('div').parent('div')); 
    },
    rules: {
      first_name: {
        required: true,
      },
      last_name:{
        required: true,
      },
      email:{
        required: true,
        email : true
      },
    },
    messages : {}
});
</script>